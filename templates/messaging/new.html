{% extends "base.html" %}
{% load static %}
{% block title %}Start a Message · CareHub{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-2">
  <h3 class="mb-0">Start a new message</h3>
  <a class="btn btn-outline-secondary btn-sm" href="{% url 'chat_inbox' %}">Back to Inbox</a>
</div>
<p class="text-muted">Browse {% if mode == 'physician_to_patient' %}patients{% elif mode == 'patient_to_physician' %}physicians{% else %}users{% endif %} and start a conversation—no appointment required.</p>

<form method="get" class="d-flex gap-2 mb-3" role="search">
  <input class="form-control" type="search" name="q" value="{{ q }}" placeholder="Search by username or name">
  <button class="btn btn-primary">Search</button>
</form>

{% if peers and peers|length %}
  <div class="list-group">
    {% for u in peers %}
      <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-between"
         href="{% url 'chat_start_with_user' u.id %}">
        <span><strong>@{{ u.username }}</strong></span>
        <span class="text-muted">Message →</span>
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-info d-flex justify-content-between align-items-center">
    {% if q %}No results for “{{ q }}”.{% else %}No users to show yet.{% endif %}
    <a class="btn btn-outline-primary btn-sm" href="{% url 'chat_inbox' %}">Go to Inbox</a>
  </div>
{% endif %}
{% endblock %}
